# Aug 16 2018
#DOCUMENT_IDS=("1V68AUKVQXGS2ahNb1VEYkcUdF28KnLxc" "1ITiRX8-Xr754rvSrURgJcHD-kgJQB6w8" "1OjT77lk9Y1BMMd6BBMDnllgnOFSYg86J" "1bd51LkhnYMjMgxMfAtsbjy9jjDaVOmlG" "1jvJ-vQlI0sEdUw1mooOieU8SoIE3b4c4" "1BLHoeArhxRg047Vo_brB734NXIOVY60J" "1mlD1mz7E3QYPMRMmYAReHetRV3gkv7w1" "16chY8muaqfNBpMGnJoeFPdOZTdwjIYeN" "1XGCEzUf6RrHBSIHcrAeKpE8O8_hrUypJ" "1KP_7ob3DYN9hBW8wLudY6ReIxUB-CJsE" "1hqu2B0aYabcO3tSctci4uPkSvi_yug-Q" "1df1jHxen1daqtOZT6qzaDCZvrlEf-6-t" "1zZ_v9HzrVlRgsu8Ze4gXgx3cujMtKIWl" "11aDQgbav1JXkN8TuDjBmpQZRwzJoGORK" "13tZPfHAvykBZH4fs2tHNjRuOdU6vv2qD")

# Jul 1 2019
#DOCUMENT_IDS=("1DpjsKeGj4bd03WXh7cK1xAlf_OSksTQc" "1sLHRam094qycsPc7_sL9wtogiVnLjFAR" "1bjYtLzTwHqWyds446RvGi0Y_3uRXyZyC" "1zVs-cdlt49kU7vdF5VW8Hkyp7-1UpLb8" "1dL2hCznLVfGYxrilBvJaGwF9PbA1DvuI" "1FPPv-F7pk4ySEQfw8lKlv31pz40gjz3H" "1ILo_PxxWhPXVJ_EOn_POKCqWqNnqDK83" "1Om7hEQwxOMkIStSi7l7D3vN5ekL2iCz9" "11cB3p8rIyNakAoxXJaV_CKVJdNcU40gW" "1QeGQGjGL6HMjWPkjDCeyvbADudN0fu8T" "15MOI_QDiCNn84-x4vAcT5-6cruJy798z" "1lAL3_b10kwvIngeSQ4wIUkihBt-cCBnB" "1gC69DSJ-phbpM0SgXWQfa7svPUVzx3DE" "1j8xlbxOzBGSp6WgAWag2KXXrkylVpEXc" "1ZdBOgWy_IlaAhz4oQFK_LVlne5ELblbG")

# Jul 16 2017
#DOCUMENT_IDS=("1Df7CbHWpr6BYRi_LIlpxYUkNgFeca025" "1FZ7lBvDSZfkssW1oNgGmK_IzYniYVUs3" "1KRkjM1w7tkVulx-XSgHjiSdIXQARcM8z" "1eZLd6totxjuEi-7-qI545qEIlPIr7NLW" "1OgJDdqweMAPgyBkpL8igTfS3r3daNqUy" "12MHWx3OzB3PcgvBHtTYBSIWqLOwsD3bm" "1AgRtev4z7RW85N83irhMZzqslRx5eMbW" "1AU4MaYdt1bp306ru-Bat6KILAW6n1gs1" "1miFovlPaGF1MKj-_xtv3478vIiJNqItH" "1H19SIYso31bfYa1ud2qosZIOly0UaB2E" "1SJPgcNOLH-tul-XIkh5liHlguU5BTotC" "1UVp-5zAjShMeqMEoK0qt0M89tgPpU1ga" "1c0q9GVQV9yWJnutf22lXIlHd0fXLXJ18" "11mwog5gAepHItXfTaKll-4tk2JGAGoAe" "1VV2Kz-FmflvHUiiKIKzKVg5r0xJGuRSx")


# Aug 1-16, 2018
# DOCUMENT_IDS=("1xXArBQWuX7x-CpidVEKH9kp6W29k94Yf" "1Qg0lHOqiwDAGADgsHuSCNJy_woUp6LSB" "1aReE95lnCopm2PrwYC5ywr1j2WmBQLMm" "1yWZo4jA9hfxdFfpWwB_1Xm5em0JOZWpw" "1zUhUcY-JgmSN4NUhoGfvh4dkfbiOKJpQ" "1weIUAzGftgmAjwISx1MdHIg9mnYK3sgC" "1YDtjSydp7wpR5nqCq5dKOK2_BanGQGwX" "1vOEMznVxyyGf-AyPO3tVSNbTWu-aIm5x" "15xdIBzh50evr9k2efbrc8O745NG4slxL" "13MdQz0qeYYG5LKkmlcnlYLZQpQabXbaW" "1scX3nxJcwOWpdnk7jk33I79IH0n7e2AH" "1K6HoRfbRHKaHv5Xj6jpwOAUIJnaJ7pry" "1DW3XwwFaV-jjxPRRkABekTfsEZ5lkdAv" "1y6kHu4xlVlrzkOImXAFh0B5ZZ4WneehG" "1D01Mk9yCXMEScsuJfrFF8waQcmdNMOiS")

# Aug 1-16, 2016
# DOCUMENT_IDS=("1zvOj_0q8jsaGPflIV6xjIibCgTnSW9mb" "13Gw9pitOK7tQTsFSNy5Q6mOyMWNp24nl" "19P-vLZM26yKvXxwpD7WnSBqRtae-BDDz" "1xTyjeVmYPwGmXtXEkKTPr5i79dnY14re" "17jX1rO7Qz9TU0ORbgtf-BRffNh3G61Pz" "1fOdTHLtL1Zzf2Hh3_T3woS5OjDNiaxJs" "1p2raQRgpfAq4RmfGXxn4v-Xb2rM2C3so" "1vS32cVFIRY8WP7R6XcoSGtQ95VRBG9o9" "1RbiK5Oa7SpM0D3MWyUf5XZIBl6zIn-eH" "1i8FT_aDZ5oL0D9euKivoDJxgWtbpNH4y" "14VVK_d7q6BQ5ONpe_cLux0CSysPB6-6s" "1KZ32R4iOOew9QEVzoN4TT6U3c8kZ3WZe" "1h5bSSdugByW9uOGZlzBK65y7iC2dM6fD" "1D7DtOWtj0Z8Dd7uWkkg6WHp7dheMThq9" "1bZ2KGMAh25wsd4qHNArtxcymw-DBVt91")

# 2018-08-01, r2
#DOCUMENT_IDS=("1b566Fs4b4HycLTIm2eEfTrpmk8j7fsnu" "1R-8ADvC3WLGllZMMzedN6weOyWV_CFHI" "1RN8QmW5Iju-c5jQ76t4IfjjDVhSEyhjZ" "1G3rggh3_ggHo4kRtLpJXtDcWCCMg8mHS" "1F77ugWvyFRJbceOgkR11G-DH9TVqpKG3" "1euf-1O0g7yXcG6K9goUTUfGOlLaWjfRs" "14G9YRBeqmd18LJSVcu0TFBlBT-vUP7Zu" "1WHw0y9syUxEE2bDaBFl9ureZIIP4X73A" "1FIhuV5bx6yUYpktJBajc6C72BTi9Ny90" "1bfLt2VAVwFj2PcZGzhgf6p85y9dhAuw9" "1aFGqXm_O1LJ2iyTfKtFPaAd95FYmI3rG" "1-_VbFCapvHez5qagkcbtIgJ06kv50_44")

# 2016-08-01, r2
DOCUMENT_IDS=("1XCaN8ai9No_4wmbZCKLPOc_8UVQQDVnA" "15cMs1JuBvIeKH5blnPTFb2Bifmf9Tdsm" "1EtvhnsbXUaGmUlVxtCoioCXWVPQHaUEn" "15Gmg3JxyWsTO06x-qGJye1TPkZyhK85r" "1zkZlyMejJJP4w9-aQ_SIAbw0nIw4xvWy" "1MnvD7qGYpZ7GZ7BlCKHfGPbj3CQR3-XX" "1x69y-M7KzInzaifkWcsBMS-E-YDBgQ4x" "1j6JBUXNwqjnQ2DHtNM0j14F5mAwhFiqd" "1_SAvLkqT5kId7jN_8iOaglqA2pvl0xZp" "1aOs_Y1MgoDR2CZTyJKEqsgJxDexrBYk-" "1ZYF2lsEj4OtTCNaiC67Zj_sVgl0M3WlX" "1Vdy_DiC0_HZsZN7zDzPQ7ayh5iW1feG4")

# DOCUMENT_IDS=("1xgaEwFaUe_mQAbq_NXua0_RjoNo0-qpj" "1mE7JggzWMZSqSIr5v0r3xucKZn2OwAf8" "196d_4jnvht8Kqy0CG7z8nkrry1OM2XOV" "1KyNf9bQa3WpSZtgM41en82nYPfmAhouN" "1Xncl3uy92r5qgurgJWxmFbHXzxyV3jm2" "1XhWsgYiAxkpnuiwnNrn0cH4ndpMlmEVr" "1I0Hq5iFlGST596ofiWIeFw5askW_m7Sa" "1RzXKVokf9xaQTByiOUd4S5iEbhUKiYAr" "1W1B_MbbRE1uCqBaPDXmLX8YoQevZEnw-" "1fTQ0NxfSDonfxqkk6dPf2DrVZ7suqFVN" "10Ve8DO9WxCBDgQJXV0HBhQIbyzsK67Q5" "1Ybc_cY2BxvG-zMrdAYtvC6z4qgVvJ-pT")

DOWNLOAD_FOLDER="datasets/LandsatReflectance/test_2018-08-01"

mkdir ./tmp
mkdir ${DOWNLOAD_FOLDER}

for i in ${!DOCUMENT_IDS[@]}; do
  x=$((${i} / 4))
  y=$((${i} % 4))
  FINAL_DOWNLOADED_FILENAME="${DOWNLOAD_FOLDER}/corn_belt_reflectance_2016-08-01_box_${x}_${y}.tif"
  curl -sc ./tmp/cookie "https://drive.google.com/uc?export=download&id=${DOCUMENT_IDS[${i}]}" > /dev/null
  code="$(awk '/_warning_/ {print $NF}' ./tmp/cookie)"  
  curl -Lb ./tmp/cookie "https://drive.google.com/uc?export=download&confirm=${code}&id=${DOCUMENT_IDS[${i}]}" -o ${FINAL_DOWNLOADED_FILENAME}

  #wget --load-cookies /tmp/cookies.txt "https://docs.google.com/uc?export=download&confirm=$(wget --quiet --save-cookies /tmp/cookies.txt --keep-session-cookies --no-check-certificate 'https://docs.google.com/uc?export=download&id=${DOCUMENT_IDS[${i}]}' -O- | sed -rn 's/.*confirm=([0-9A-Za-z_]+).*/\1\n/p')&id=${DOCUMENT_IDS[${i}]}" -O ${FINAL_DOWNLOADED_FILENAME} && rm -rf /tmp/cookies.txt
  #curl -c ./tmp/cookies "https://drive.google.com/uc?export=download&id=${DOCUMENT_IDS[${i}]}" > "./tmp/intermezzo_${i}"
  #curl -L -b ./tmp/cookies "https://drive.google.com$(cat ./tmp/intermezzo_${i} | grep -Po 'uc-download-link" [^>]* href="\K[^"]*' | sed 's/\&amp;/\&/g')" > ${FINAL_DOWNLOADED_FILENAME}
done
