# 2018-08-01
#DOCUMENT_IDS=("1rMAm92Ln84As26BT8fdy_Xb7YV-YXRdU" "1mGcruZV4VcoJPpWQ1456TZ3rUDDLUHJP" "1fCFB9NtwvcmU8F74rbvqf5HIyS6uiKrp" "1xhXT5GmwfwdZWZN48i0MnLZAtQlQQ7LH" "1d0DX7A3nGv905CsNS-xYlGXHo64nGdJz" "1tYsp4aVW1bLD3gvwMdRxMG_xW2kdasjw" "1r6Nmub8noHeFkeW1oyo8OIrg-acsl3rS" "1Z7oac_pU8VGD7lm1Pom-GznGUClm14JL" "1VpFJNXfSDI0jtmDS-Kcylr3j-_2PKDvh" "1Nw25X12ooAs65icUQX-zdO38d5k8VGSF" "1_4cXBS0JlIyKbZpgAzb2eyh8Qg4X9JZj" "11xgW274YggdVRow7E4igDJV3WSAjoESF" "1XQM20iaq4YzT8sZNOmZjeTLSK0fABfIM" "11lVQ5IsjhH8fccKiTd-qMi1EBE-VX51g" "1qrXZbHTSsaf6SW7MEQzfsOm80dNLS7fc" "1VAsl5NzYUaCRYqcnEA4mDC06KM_MmkBm" "1tgUMtypQfVvY_E29ZlmytLg7uFtK_E2b" "1A3U0bc88Y5M8H7d-BjrY1pRaKiS9I4Xs" "1EUHTVTuiYuR5mEQhfqqchXoqfSFjXX5S" "1f4_rY9IqSWShlUPF5__unQKpFqoqVrB6" "1BdVH511o5Tmt5lK4kCt1GzPN_PscCs93")

# 2018-07-08
# DOCUMENT_IDS=("1tMYVNfepg9rUA4vPJltGL2v17xtZzHH7" "1TBDt9xr6t-ZEYShZwTBZbdR-Ux1RbZEU" "1Wk3yfy4qHkBdAWOq6WStXiYpsNIlQPYt" "1ybyMTVOsNO2SOMwglSNZ1EK4iTRzCpFP" "1iqRS_N8TNB6U1_9SZrzxPjlnlTteSITz" "19lg9YC6ry96NBQvj25L0sR8ZW1p8V6Gy" "1beEJkqYY9b3dzeUjCgHUni2CtI3N9eo7" "1NqR9r73iODa4MAcBXMzuPp94BM-hpNgz" "1zAvJcJS3xXN5hIE8N7ZqjVB8UdmpWDH3" "1OkZGXLdEAOI9UNz9M8s49NnG6HL80Ccy" "1TlLp2WsybGEVJ0LObGTVP5D-8wr7A7a4" "1TWaxqbzNXneiCqxFerNwRKwWzBnhDcay" "1qiDpZUAtt63xYqXhDntjbY1QJSmJ15C4" "102cW-m_ecNt1s2Zfs57H7gMgi4J7YypJ" "1PkgvK6-Boi-I7i2JFEKiss5n-Eanh5ot" "1EWNcUcNQrIBdjGlynx3oZc9KIqiMIDoP" "14AMGJuQRjcGITFUEdL082MzfVzOOFdQ8" "1UsAcJKGqQgjCC2DVBfjAE8vfQKI-sMJq" "1uPakZ0xn8HZsvbSWo86czrZpNmzDXW8T" "1eYb2cgCyzbN81VRos6jq2iZyLeXQK0w7" "1DyyQkW9m3eJvCgEqaQwRRNiVPpmEEr5j")

# 2018-07-22
#DOCUMENT_IDS=("1yQNvyTYleHt2QQp4QQBVFmF9GTMxZoem" "1bM9kSmt5Xe4AwgDPK1sn1wpd9cFySE_a" "1P2F2WzA4sZZ_Z5hqYSrce4pwp7ZvK5Qw" "1eb8nCQrHdhL5H0CKbCzNBRYzk4grFz4A" "1vjnfGMHBNHc61zEXDY0XPctl77esPPuz" "1juonalA-WQ9Ft8b6hyZqnpNPV_S-JsIc" "1LaLS6hyIi1qRKVJYuarfFRgKXAXQ-DWR" "1dAlaeW_mPiyznLranKiWac0gfiV18T9C" "1ilgGbFFJb6hapxjZk5QDDutnM6tEFcvS" "1ZeR2nbPkswCbZwKo2BMe83aL2GfNx8uW" "1jOHhvu_FkuyoBLEy_25XS7dGk7ZJWI7J" "1G7YQ_AECW1qJWmHysAZAm-4NyyVObDQB" "1Z-2ng0Wsrsgp30DA9uL6Yq8nuJtnjR1n" "1BJyfuyvXKTEwvDK7Mryn4hcXRy1mAP-i" "1Ww9eeH4KMTWSoW5v6F-MflPLGhOg8r8V" "1LGwezwDOgJSt04dFYE1P3vXq2DiBl3Tj" "1WDZn0h-xlm4GOYgsVwmfUK7mCsUqnaDg" "1N24rGYwvZUd9xHICOYxe3vhRJzOm7PME" "1GltQlWIYQgQE7pKnB8UAZfbgYvDpvE5g" "145LIwevMNOvitqQq7c579nmwLh5FFDfA" "19nUlU8IyB-XQc0iCjSC9fZz1sJQr7sXL")

# 2018-08-05
# DOCUMENT_IDS=("1jwQogR0EQP-vYVHMf3AKf3s8nDCUrvqX" "16EfyWzGd58orTiSHHYK73-FjEmpAgXt4" "1WPuYqRsZM--wnn5dcviawZWR9Qf3oHxw" "19Vux1PiMOQOBjrVASDX-QjX8zNV30Jmz" "1vq5y6BbxcyHEsPzZEnN244k_zAjgOVq8" "19nwRSWseVK1Sp3Pl1Xw89Sv_0I-NZGmg" "1x5B_Gh8B2272Px6DWc00Ju7f5qQdbXhg" "1w53RiI9e0-LRG6Fv_p2Hk_uHE0FHDYmb" "1KmrCKMqiJ6etOO079qUQ4PiKfA2HNBk_" "1fqnxzgR3cNSHzC6gsptPXbhTPTVZtYo7" "1v0a69QVfAGwbT70NwkqYIihI7bwdJ6FG" "11HHLcu-kWidWVrfxlYZ62R8tWsNJIlqF" "1YklGTC3VwjTsd_MtRV3xlxlcvxWY_lz5" "1OpLE4eKlFKaSRkNAD0_3gjK_bySP1YC7" "1mDrSSCF5_HhVh6SV_gZg6m3XDwToynVD" "1vYbKzZAQpuVAhhwZbKkbqKOu5TnPKWQ6" "1aUz3sLcVPEuQXCfbYdyjz1mEY3pp-Xy1" "1irRshQWleJPW-FdNl9v2Rd8b_hJkzu1U" "1tCSxlGI0wYBzhdy3L8NzTu6vpnPYAvTf" "1_yFcaWmajl3dL9PXFc6R7FXzCZpMC7gK" "1ivHjaeJCj14BAAP4IYUkGHVUyMfLbuWY")

# 2018-08-19
DOCUMENT_IDS=("1AaQoYrPkdNQS3sp-FQboq8ELtn-d1fn7" "1kQmo1ICVFESkhNIz-YjrMvmeBjANznqt" "1l4BRKqy8SZ83QMt60SbHjIBbkOLYO65l" "1Kuv6v7EJqAO3xE7qPnKc7PMjGOyaGFYx" "1EFU1hyXqIV5Hb4i0T62p4_3NM5OqZWdR" "1zoG3ewmbKlhV-zx_a4wWSxqSDDwZvMEB" "1UY_dbmO7pA5A7DqB-nVSGWiR9XamCqJH" "14HprEMrlqmy_HsUTDmUHZDWlWi33uuTd" "1R6btZztKgHtasONmUqG9W4gr7uy7DTFY" "1sJ2mkV1IPdQTNnqHfG9UP5if0NwAZ-pc" "1s3N-DZA4ekLUVszJPnS4wnOtpH-yMYMY" "1VJbxhUgSDzqg_3KlGGKi8S_Mqz0nHPQc" "1-Lytf4XR-Z0LQWD5AWPfWk-B5U-O6LGF" "1df7vekqG3ZhxdA4Pq4wQQEoMPIGrAt0S" "1-pIJ8VgXk3DBtgaTJ8pOlfo1R0ynM1lY" "1cWzD42HTG-qZUmxqHw91PXJskY7ncdp-" "1woEW0Md0CI6o9PwYzBivyRG59LJzUhnR" "1jx34q-T_T9Kvp08VWsQgmN4fwM7WYMgl" "1hHcr3HPdBwzr-9vMSYNvqiakbiYeEI-V" "1ecKoC_hc8uP7D6T9SomiLG4Z71ARDuSs" "1wWmLpmCR_0Dn7dGIphRT0Bnl0giTnmwH")

# 2018-09-02
# DOCUMENT_IDS=("1jEzN0R9rN8RbZ9ry2JpXd7koiQy0c2nh" "1gMlVAvoCEVQHehwfRUVcQZiXPJUmV70Z" "1-N3hIQSO9ouXmlP9PESTSyJr8AaO9iVv" "1IXhZiiwhvKAWF3IxomH5mKJIFdhNytfk" "107V2m662ALY6p7gQEWtQiYJhRqp7C5kR" "147ogKVvT78Tqs4SvKF5c7iSPtve-CiQE" "11VxPmJytunfC8AJqW6Y9oENrXCaTcytB" "1cRstyZTOVRTZ6yVW64xZ76bgjPTFl3bj" "1XJSc1ttFNFF-8aMdjIdZFxMKFkxocl-x" "1CVokc7xGtBF2EOaM-deP8d_PsY5FS6_u" "1ECLj2TdiUTVl2juQo9iBUb2cc2IggoDx" "1n815ypGP6bNpA6EPU2i1xnuogYWiXASj" "1Cs07xAtlBv-EHKxuI7KbxHOhiWdEHZJc" "1dPJbHtP03H1UcHhZtSwapLZ6jCfmXPmz" "1wEEsqiz5BjR3n9RytMWENsNpIYdJZ70x" "1w3EUj947vODxP7KrRGJuYPER-xdY7VFe" "1RLLSwJWOcbkQpcTvuSyjzOEjfaEiHIMP" "1i1efg9EAOHpWpqkW7_b24pPEdijOjG_o" "1eFnKlwazeqR02UW9rSSjamfNNSUaOZ4N" "1u_UmEP-JNzgpDCd092AIhgEj9pV7c0ls" "1BFfUkX8TDek2YLMG1sC-2oMoCd9n1mbl")


# 2018 CDL
#DOCUMENT_IDS=("1_XR322SooLPsPpy47sBlPcdfNL_dMytz" "1ajjhIFBDv79gQ_4f98tn-Yqq1Qtxw-T8")

# 2016-08-01
#DOCUMENT_IDS=("1jZG1Dxg0jurneuiT11iuCh_Kso7lWsTT" "13vl2rHvjpY3xeEL1lEE6Wi4MYvAM--Bl" "1H07JVbsgg8hjOwMOPQvlIeCRBEVv3T6e" "1W3KqMbniHNpYJiJX6mXyTSMfFN64xDaz" "1BMeo_cj6awdeuq9clS1rQu3KWlkv4Ktf" "1mgfa5ZOTU8KVZxySbMQzuXQpF1OYZ8kf" "1PUgQOGL3553X94y3xfaA1RLFRB-eZGnO" "1CPPWKPscht6aS5skcZvVsLrf3_43Y4em" "1wTaKU-kEArnOVRC6FP4QYTKalVlGpaux" "1rq-M8kTx26R-hlnyJzYoz2J_ooqtqZSh" "1Fslh5Zv2FVwrGzDCquvXr_dC44JvA8Ib" "1CrlEZECFqsOjcgtQbF40oI2j9o-GNjAU" "1tyoj4sc1HPo8nu8oFDRRFeIXlFuHoiOd" "1Poxx3uadPc36HGD5Ssu6yLBCskeUf-A5" "1n01WrsXMAgLJY-wa7l9djuQS9qHD6pct" "1hXBJpibRprTEhJFQnKfcLOkXW0MS3JUw" "1woAsjscP2yzIYrTW8e6GIA5S5_-dzHWT" "1zJ8i_IBTvEZykf3APAwmRM89ZhPofYgI" "1Zs_Djq3Er2yult4fLnpevIBvRGiS9Ydu" "1M592QW1kvyhm-YbWsMR4pWfz9nxjDSKM" "1Ey6Cah5UE03W3UZ-HOOA06hybagebNM-")

# 2016 CDL
#DOCUMENT_IDS=("1kI0y-vlDXC9SSCc6oFKiYjvfO8dMziJu" "1O3I4SAdaUtB8bd_4MdPxzuIIPLTkKNvj")

DOWNLOAD_FOLDER="/mnt/beegfs/bulk/mirror/jyf6/datasets/LandsatReflectance/2018-08-19"
#DOWNLOAD_FOLDER="/mnt/beegfs/bulk/mirror/jyf6/datasets/CDL_2016"

mkdir ./tmp
mkdir ${DOWNLOAD_FOLDER}

for i in ${!DOCUMENT_IDS[@]}; do
  x=$((${i} / 7))
  y=$((${i} % 7))
  FINAL_DOWNLOADED_FILENAME="${DOWNLOAD_FOLDER}/corn_belt_reflectance_box_${x}_${y}.tif"
  #FINAL_DOWNLOADED_FILENAME="${DOWNLOAD_FOLDER}/cdl_2016-08-01_box_${x}_${y}.tif"

  curl -sc ./tmp/cookie "https://drive.google.com/uc?export=download&id=${DOCUMENT_IDS[${i}]}" > /dev/null
  code="$(awk '/_warning_/ {print $NF}' ./tmp/cookie)"  
  curl -Lb ./tmp/cookie "https://drive.google.com/uc?export=download&confirm=${code}&id=${DOCUMENT_IDS[${i}]}" -o ${FINAL_DOWNLOADED_FILENAME}

  #wget --load-cookies /tmp/cookies.txt "https://docs.google.com/uc?export=download&confirm=$(wget --quiet --save-cookies /tmp/cookies.txt --keep-session-cookies --no-check-certificate 'https://docs.google.com/uc?export=download&id=${DOCUMENT_IDS[${i}]}' -O- | sed -rn 's/.*confirm=([0-9A-Za-z_]+).*/\1\n/p')&id=${DOCUMENT_IDS[${i}]}" -O ${FINAL_DOWNLOADED_FILENAME} && rm -rf /tmp/cookies.txt
  #curl -c ./tmp/cookies "https://drive.google.com/uc?export=download&id=${DOCUMENT_IDS[${i}]}" > "./tmp/intermezzo_${i}"
  #curl -L -b ./tmp/cookies "https://drive.google.com$(cat ./tmp/intermezzo_${i} | grep -Po 'uc-download-link" [^>]* href="\K[^"]*' | sed 's/\&amp;/\&/g')" > ${FINAL_DOWNLOADED_FILENAME}
done
